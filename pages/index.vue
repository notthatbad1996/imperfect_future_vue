<template>
  <main>
      <!--<div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
          <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
          <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
          <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
        </ol>
        <div class="carousel-inner" id="bl">
          <div class="carousel-item active">
            <img
              class="d-block w-100"
              v-lazy="`https://www.joegreens.cn/images/2018/09/08/1536375174366311.jpg`"
            >
            <div class="carousel-caption d-none d-md-block">
              <h1>长泽雅美</h1>
              <p>
                长泽雅美，1987年6月3日出生于日本静冈县磐田市，日本女演员、模特。
                2000年，12岁的长泽雅美获得了第五回“东宝灰姑娘”选拔赛最优秀奖 [1]
                ；同年，凭借悬疑电影《走火入魔》进入演艺圈。2002年，出演奇幻爱情电影《黄泉归来》。2003年，凭借喜剧电影《机器人竞赛》获得第27届日本电影学院奖新人奖 [2]
                。2004年，凭借纯爱电影《在世界中心呼唤爱》获得第28届日本电影学院奖最佳女配角奖 [3]
                。2005年，主演运动爱情电影《棒球英豪》。2006年，凭借纯爱电影《泪光闪闪》获得第30届日本电影学院奖最佳女主角提名 [4]
                。2007年，主演了纯爱剧《求婚大作战》。2008年，主演了社会伦理剧《最后的朋友》。2009年，出演了大河剧《天地人》。2010年，出演了电视剧《GOLD》。
                2011年，凭借爱情喜剧片《桃花期》获得第54届日本电影蓝丝带奖最佳女配角奖 [5] ，并入围第35届日本电影学院奖最佳女主角奖 [6] 。2012年，凭借侦探剧《都市传说之女》获得第73届日剧学院赏最佳女主角奖
                [7] 。2013年，主演了侦探剧《都市传说之女第二季》。2014年，主演了灾难爱情片《太平轮（上）》。2015年，凭借剧情片《海街日记》获得第70届日本每日映画大奖最佳女配角奖 [8]
                。2016年，出演了大河剧《真田丸》。2017年，凭借科幻悬疑片《散步的侵略者》获得第41届日本电影学院奖最佳女主角提名 [9] 。2018年，主演了悬疑电影《爱上谎言的女人》及喜剧《行骗天下JP》。
              </p>
            </div>
          </div>
          <div class="carousel-item">
            <img class="d-block w-100" v-lazy="`https://www.joegreens.cn/images/2018/08/31/1535678143114013.jpeg`"/>
            <div class="carousel-caption d-none d-md-block">
              <h1>新垣结衣</h1>
              <p>
                新垣结衣（Aragaki Yui），1988年6月11日出生于冲绳县那霸市。日本女演员、歌手、模特。毕业于日出高中 [1] 。
                2001年，参加《nicola》模特比赛并获得最优秀奖。2005年，因出演现代剧《涩谷15》而作为演员出道。2006年，参演校园剧《我的老大，我的英雄》；同年，她还出版了个人首本写真集《水漾青春》。2007年，她从日出高校毕业后开始专注于演艺发展，并发表个人首张音乐专辑《天空》；同年，新垣结衣还主演了爱情片《恋空》，而她也凭借该片获得了多个电影新人奖项
                [2-3] 。2010年，主演爱情片《花水木》 [4] 。
                2011年，主演都市剧《全开女孩》。2012年，相继参演现代剧《Legal High》、剧情片《剧场版新参者：麒麟之翼》 [5] 。2013年，主演都市剧《飞翔情报室》。2014年，她主演了剧情片《黎明的沙耶》
                [6] 。2016年，主演爱情喜剧《逃避虽可耻但有用》 [7] ，并凭借该剧获得了多个电视剧女主角奖项 [8-9] 。2017年，主演爱情片《恋爱回旋》 [10]
                ，凭借该片获得第60届蓝丝带奖最佳女主角；同年11月，她还凭借医疗剧《Code Blue 3》获得第94届日剧学院赏最佳女配角 [11] 。2018年，主演爱情剧《无法成为野兽的我们》。
              </p>
            </div>
          </div>
          <div class="carousel-item">
            <img
              class="d-block w-100"
              v-lazy="`https://www.joegreens.cn/images/2018/09/08/1536374255036936.JPG`"
            >
            <div class="carousel-caption d-none d-md-block">
              <h1>Eminem</h1>
              <p>
                埃米纳姆（Eminem），原名马歇尔·布鲁斯·马瑟斯三世（Marshall Bruce Mathers III），1972年10月17日出生于美国密苏里州堪萨斯城，美国说唱歌手。 [1]
                1997年，埃米纳姆首次以个人身份推出专辑《Infinite》 [2] 。2000年2月，埃米纳姆凭借专辑《The Slim Shady LP》获得第42届格莱美最佳Rap歌手和最佳Rap专辑 [3]
                。2001年2月21日，埃米纳姆凭借专辑《The Marshall Mathers LP》获得第43届格莱美最佳Rap歌手、最佳Rap组合和最佳Rap专辑 [4-6]
                。2002年，埃米纳姆出演了电影《8英里》，并在影片中演唱了《Lose Yourself》，获得奥斯卡最佳原创歌曲奖 [7-8] 。2004年2月，埃米纳姆凭借歌曲《Lose
                Yourself》获得第46届格莱美最佳Rap歌手和最佳Rap歌曲 [9]
                。2008年10月，埃米纳姆的自传《这就是我》上市，而他的第六张专辑《Relapse》在年底发行。2011年8月，《滚石》将其评选为“嘻哈之王” [1]
                。2011年12月，第53届格莱美奖的提名名单中，埃米纳姆以10项提名领跑，提名包括最佳专辑、最佳说唱专辑。2015年2月，埃米纳姆获得第57届格莱美最佳说唱专辑和最佳说唱表演奖 [10] 。
              </p>
            </div>
          </div>
        </div>
        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>-->
    <!--文章 瀑布流布局-->
      <!-- Swiper -->
      <div class="swiper-container">
          <div class="swiper-wrapper">
              <div class="swiper-slide">
                  <img class="d-block w-99" v-lazy="`http://192.168.189.129/images/2019/08/01/1.jpg`">
                  <!--          Slide 1-->
              </div>
              <div class="swiper-slide">
                  <img class="d-block w-99" v-lazy="`http://192.168.189.129/images/2019/08/01/2.jpg`"/>
                  <!--          Slide 2-->
              </div>
              <div class="swiper-slide">
                  <img class="d-block w-99" v-lazy="`http://192.168.189.129/images/2019/08/01/3.jpg`">
                  <!--          Slide 3-->
              </div>
              <div class="swiper-slide">
                  <img class="d-block w-99" v-lazy="`http://192.168.189.129/images/2019/08/01/4.jpg`">
                  <!--          Slide 3-->
              </div>
              <div class="swiper-slide">
                  <img class="d-block w-99" v-lazy="`http://192.168.189.129/images/2019/08/01/5.jpg`">
                  <!--          Slide 3-->
              </div>
              <div class="swiper-slide">
                  <img class="d-block w-99" v-lazy="`http://192.168.189.129/images/2019/08/01/6.jpg`">
                  <!--          Slide 3-->
              </div>
              <div class="swiper-slide">
                  <img class="d-block w-99" v-lazy="`http://192.168.189.129/images/2019/08/01/7.jpg`">
                  <!--          Slide 3-->
              </div>
              <div class="swiper-slide">
                  <img class="d-block w-99" v-lazy="`http://192.168.189.129/images/2019/08/01/8.jpg`">
                  <!--          Slide 3-->
              </div>
              <div class="swiper-slide">
                  <img class="d-block w-99" v-lazy="`http://192.168.189.129/images/2019/08/01/9.jpg`">
                  <!--          Slide 3-->
              </div>
              <div class="swiper-slide">
                  <img class="d-block w-99" v-lazy="`http://192.168.189.129/images/2019/08/01/10.jpg`">
                  <!--          Slide 3-->
              </div>
          </div>
          <!-- Add Pagination -->
          <div class="swiper-pagination"></div>
          <!-- Add Arrows -->
          <div class="swiper-button-next"></div>
          <div class="swiper-button-prev"></div>
      </div>
    <ArticleList :articleList="articleList" @infiniteHandler="infiniteHandler"></ArticleList>
  </main>
</template>

<script>
    import ArticleList from '~/components/views/article/ArticleList';

    export default {
    head: {
      title: 'Home Page'
    },
    data() {
      return {}
    },
    fetch({store, error}) {
      return Promise.all([
        store.dispatch('loadArticleList')
      ]).catch(err =>
        error({statusCode: err, message: "首页加载错误"})
      );
    },
        mounted() {
            let swiper = new Swiper('.swiper-container', {
                pagination: {
                    slidesPerView: 1,
                    spaceBetween: 30,
                    loop: true,
                    pagination: {
                        el: '.swiper-pagination',
                        clickable: true,
                    },
                    navigation: {
                        nextEl: '.swiper-button-next',
                        prevEl: '.swiper-button-prev',
                    },
                },
            });
        },
    components: {
      ArticleList
    },
    computed: {
      articleList() { // 获取文章列表
        // 注意: this.$store.state获取模块数据时需要加上模块名
        return this.$store.state.article.articles.list;
      },
      nextPageParam() { // 下一页
        return {
          pageNo: this.$store.state.article.articles.currentPage + 1
        }
      }
    },
    methods: {
      scrollToMoreArticles(pageNo, $state) { // 加载所有文章
        const params = {pageNo, $state};
        this.$store.dispatch('loadArticleList', params);
      },
      infiniteHandler($state) { // 滚动加载
        setTimeout(() => {
          // 获取更多数据
          this.scrollToMoreArticles(this.nextPageParam.pageNo, $state);
        }, 1000);
      }
    }
  }
</script>

<style>
  /*电脑端首页滚动大图*/
  @media (min-width: 999px) {
    .carousel-inner {
      height: 600px;
    }

    .carousel-inner img {
      border-radius: 2px;
      box-shadow: 0 2px 8px rgba(14, 21, 47, 0.25);
      width: 100%;
      height: 600px;
    }

      .swiper-container {
          width: 100%;
          height: 600px;
      }
  }

  /*让图片等比例缩放成父容器大小*/
  .carousel-inner img {
    object-fit: cover;
  }

  .swiper-container {
      width: 100%;
      height: 100%;
      margin-left: auto;
      margin-right: auto;
  }

  .swiper-slide {
      text-align: center;
      font-size: 18px;
      background: #fff;
      /* Center slide text vertically */
      display: -webkit-box;
      display: -ms-flexbox;
      display: -webkit-flex;
      display: flex;
      -webkit-box-pack: center;
      -ms-flex-pack: center;
      -webkit-justify-content: center;
      justify-content: center;
      -webkit-box-align: center;
      -ms-flex-align: center;
      -webkit-align-items: center;
      align-items: center;
  }
</style>
